# Viper Node Store å¯åŠ¨è„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“‹ è„šæœ¬æ–‡ä»¶è¯´æ˜

Viper Node Store é¡¹ç›®æä¾›äº†å®Œæ•´çš„å¯åŠ¨è„šæœ¬å¥—ä»¶ï¼Œå¯ä»¥å¿«é€Ÿå¯åŠ¨å‰åç«¯æœåŠ¡ã€‚

| è„šæœ¬æ–‡ä»¶ | è¯´æ˜ | ç”¨é€” |
|---------|------|------|
| `start-backend.sh` | å¯åŠ¨åç«¯æœåŠ¡ | å¯åŠ¨ Python Proxy Server (ç«¯å£ 8080) |
| `start-frontend.sh` | å¯åŠ¨å‰ç«¯æœåŠ¡ | å¯åŠ¨ HTTP æœåŠ¡å™¨ (ç«¯å£ 5173) |
| `start-all.sh` | ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ | æ–¹ä¾¿å¿«é€Ÿå¯åŠ¨ |
| `stop-all.sh` | åœæ­¢æ‰€æœ‰æœåŠ¡ | ä¼˜é›…åœæ­¢æ‰€æœ‰è¿›ç¨‹ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# è¿›å…¥ Viper Node Store é¡¹ç›®ç›®å½•å
bash start-all.sh
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
1. âœ… è‡ªåŠ¨æ¸…ç†æ—§è¿›ç¨‹
2. âœ… å¯åŠ¨åç«¯ Proxy æœåŠ¡ (Python on port 8080)
3. âœ… å¯åŠ¨å‰ç«¯ HTTP æœåŠ¡ (Python on port 5174)
4. âœ… æ˜¾ç¤ºå®Œæ•´çš„è®¿é—®åœ°å€

### å•ç‹¬å¯åŠ¨åç«¯

```bash
bash start-backend.sh
```

**åŠŸèƒ½ï¼š**
- æ£€æµ‹å¹¶æ¸…ç†å·²æœ‰çš„ Python è¿›ç¨‹
- å¯åŠ¨ Python Proxy Serverï¼ˆè§£å†³ CORS é—®é¢˜ï¼‰
- è‡ªåŠ¨éªŒè¯æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ
- æ—¥å¿—è¾“å‡ºåˆ° `backend.log`

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸš€ å¯åŠ¨ Viper Node Store åç«¯æœåŠ¡...
âœ… æ—§è¿›ç¨‹å·²æ¸…ç†
âœ… åç«¯æœåŠ¡å·²å¯åŠ¨ï¼
ğŸ“ API åœ°å€: http://localhost:8080/api/nodes
```

**åç«¯åŠŸèƒ½ï¼š**
- ä»£ç† Supabase API è¯·æ±‚
- è§£å†³å‰ç«¯è·¨åŸŸé—®é¢˜ (CORS)
- ç«¯å£ï¼š8080

### å•ç‹¬å¯åŠ¨å‰ç«¯

```bash
bash start-frontend.sh
```

**åŠŸèƒ½ï¼š**
- å¯åŠ¨ Python HTTP æœåŠ¡å™¨
- æä¾›é™æ€ HTML/CSS/JS æ–‡ä»¶
- è‡ªåŠ¨æ¸…ç†æ—§è¿›ç¨‹
- æ—¥å¿—è¾“å‡ºåˆ° `frontend.log`

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸš€ å¯åŠ¨ Viper Node Store å‰ç«¯æœåŠ¡...
âœ… å‰ç«¯æœåŠ¡å·²å¯åŠ¨ï¼
ğŸ“ å‰ç«¯é¡µé¢: http://localhost:5173/index.html
```

**å‰ç«¯è¯´æ˜ï¼š**
- çº¯é™æ€ HTML åº”ç”¨
- ç«¯å£ï¼š5174
- è‡ªåŠ¨é€šè¿‡åç«¯ API è·å–èŠ‚ç‚¹æ•°æ®

## ğŸ›‘ åœæ­¢æœåŠ¡

```bash
bash stop-all.sh
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
- åœæ­¢åç«¯ Proxy Server
- åœæ­¢å‰ç«¯ HTTP Server

## ğŸ“ è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ï¼š

| æœåŠ¡ | åœ°å€ |
|------|------|
| **å‰ç«¯åº”ç”¨** | http://localhost:5174/index.html |
| **åç«¯ API** | http://localhost:8080/api/nodes |

## ğŸ“ æŸ¥çœ‹æ—¥å¿—

### æŸ¥çœ‹åç«¯æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹
tail -f backend.log

# æŸ¥çœ‹æœ€å50è¡Œ
tail -50 backend.log
```

### æŸ¥çœ‹å‰ç«¯æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹
tail -f frontend.log

# æŸ¥çœ‹æœ€å50è¡Œ
tail -50 frontend.log
```

## âš™ï¸ é…ç½®è¯´æ˜

### åç«¯é…ç½®

**æ–‡ä»¶**ï¼š`app.py`

```python
# Supabase è¿æ¥é…ç½®
SUPABASE_URL = 'https://hnlkwtkxbqiakeyienok.supabase.co'
SUPABASE_KEY = '...'

# æœåŠ¡ç«¯å£
server_address = ('', 8080)
```

**åŠŸèƒ½ï¼š**
- ä»£ç† Supabase æ•°æ®åº“è¯·æ±‚
- è§£å†³è·¨åŸŸ CORS é—®é¢˜
- è½¬å‘èŠ‚ç‚¹æ•°æ®åˆ°å‰ç«¯

### å‰ç«¯é…ç½®

**æ–‡ä»¶**ï¼š`index.html`

- çº¯ HTML åº”ç”¨ï¼Œæ— æ‰“åŒ…å·¥å…·
- é€šè¿‡åç«¯ API è·å–èŠ‚ç‚¹æ•°æ®
- æ”¯æŒç›´æ¥ç¼–è¾‘ HTML å®æ—¶ç”Ÿæ•ˆ

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: å¯åŠ¨åæŠ¥é”™ "address already in use"ï¼Ÿ

**A:** è¯´æ˜å·²æœ‰è¿›ç¨‹å ç”¨ç«¯å£ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ¸…ç†ï¼š

```bash
# æ‰‹åŠ¨æ¸…ç†
pkill -9 -f "python.*app.py\|http.server"

# ç„¶åé‡æ–°å¯åŠ¨
bash start-all.sh
```

### Q: å‰ç«¯æ— æ³•è¿æ¥åç«¯ APIï¼Ÿ

**A:** ç¡®è®¤åç«¯å·²å¯åŠ¨å¹¶ç›‘å¬ 8080 ç«¯å£ï¼š

```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep python

# æµ‹è¯• API
curl http://localhost:8080/api/nodes
```

### Q: ä¿®æ”¹å‰ç«¯ä»£ç åæ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ

**A:** å‰ç«¯åœ¨æµè§ˆå™¨ç¼“å­˜ä¸­ï¼Œéœ€è¦ï¼š
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. æˆ–è€…æ‰“å¼€å¼€å‘è€…å·¥å…·ç¦ç”¨ç¼“å­˜ (Ctrl+Shift+Delete)
3. æˆ–è€…ä½¿ç”¨ Ctrl+Shift+R å¼ºåˆ¶åˆ·æ–°

### Q: éœ€è¦æŸ¥çœ‹è¯¦ç»†å¯åŠ¨æ—¥å¿—ï¼Ÿ

**A:** æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š

```bash
# åç«¯æ—¥å¿—
cat backend.log

# å‰ç«¯æ—¥å¿—
cat frontend.log

# å®æ—¶ç›‘æ§
tail -f backend.log &
tail -f frontend.log
```

## ğŸ’¡ æŠ€å·§

### åå°å¯åŠ¨å¹¶æŸ¥çœ‹æ—¥å¿—

```bash
bash start-all.sh && tail -f backend.log
```

### åå°å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
bash start-all.sh &
```

### åªå¯åŠ¨åç«¯è¿›è¡Œ API æµ‹è¯•

```bash
bash start-backend.sh

# ç„¶åæµ‹è¯• API
curl http://localhost:8080/api/nodes | head -c 100
```

### ä¿®æ”¹åç«¯ä»£ç å¹¶é‡å¯

```bash
# åœæ­¢æ—§è¿›ç¨‹
pkill -9 -f "python.*app.py"

# é‡æ–°å¯åŠ¨
bash start-backend.sh
```

## ğŸ“¦ ä¾èµ–è¦æ±‚

- **Python** 3.6+
- **ä¾èµ–åŒ…**ï¼š
  - aiohttp >= 3.9.0
  - supabase >= 2.0.0
  - requests >= 2.31.0

### å®‰è£…ä¾èµ–ï¼ˆå¦‚éœ€è¦ï¼‰

```bash
pip install -r requirements.txt
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
viper-node-store/
â”œâ”€â”€ app.py              # åç«¯ Python Proxy Server
â”œâ”€â”€ index.html          # å‰ç«¯ HTML åº”ç”¨
â”œâ”€â”€ public/             # é™æ€èµ„æºæ–‡ä»¶å¤¹
â”œâ”€â”€ requirements.txt    # Python ä¾èµ–
â”œâ”€â”€ start-backend.sh    # å¯åŠ¨åç«¯è„šæœ¬
â”œâ”€â”€ start-frontend.sh   # å¯åŠ¨å‰ç«¯è„šæœ¬
â”œâ”€â”€ start-all.sh        # å¯åŠ¨æ‰€æœ‰è„šæœ¬
â””â”€â”€ stop-all.sh         # åœæ­¢æ‰€æœ‰è„šæœ¬
```

## ğŸ¯ å·¥ä½œæµ

```
1. bash start-all.sh  (å¯åŠ¨æ‰€æœ‰æœåŠ¡)
    â”œâ”€ å¯åŠ¨åç«¯ (Python Proxy Server on 8080)
    â””â”€ å¯åŠ¨å‰ç«¯ (Python HTTP Server on 5174)
    
2. è®¿é—® http://localhost:5174/index.html
    â””â”€ æŸ¥çœ‹ç•Œé¢å’ŒèŠ‚ç‚¹æ•°æ®
    
3. å‰ç«¯è‡ªåŠ¨é€šè¿‡åç«¯è·å– Supabase æ•°æ®
    â””â”€ è¯·æ±‚: http://localhost:8080/api/nodes
    â””â”€ å“åº”: JSON èŠ‚ç‚¹æ•°æ®
    
4. ä¿®æ”¹å‰ç«¯ä»£ç 
    â””â”€ åˆ·æ–°æµè§ˆå™¨å³å¯ç”Ÿæ•ˆ
    
5. bash stop-all.sh (åœæ­¢æœåŠ¡)
    â”œâ”€ å…³é—­åç«¯
    â””â”€ å…³é—­å‰ç«¯
```

## ğŸ”— æ•°æ®æµ

```
å‰ç«¯æµè§ˆå™¨
    â†“
HTML åº”ç”¨ (localhost:5174)
    â†“
åç«¯ Proxy Server (localhost:8080)
    â†“
Supabase API
    â†“ (è¿”å›èŠ‚ç‚¹æ•°æ®)
åç«¯ Proxy Server
    â†“
å‰ç«¯åº”ç”¨
    â†“
æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
```

---

**æ›´æ–°æ—¶é—´**ï¼š2025å¹´12æœˆ31æ—¥
